<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Royal Cat Survival: The Pro Edition</title>
    <style>
        :root { --gold: #FFD700; --cyan: #00F2FF; --royal-blue: #0a0a2e; }
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; touch-action: none; }
        
        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚ Ø§Ù„ÙØ®Ù…Ø© */
        #menu { 
            position: fixed; inset: 0; background: radial-gradient(circle, #1a1a4a 0%, #050510 100%); 
            z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.5s;
        }

        .main-card { 
            background: rgba(255, 255, 255, 0.05); padding: 30px; border-radius: 40px; 
            border: 2px solid var(--gold); width: 85%; max-width: 400px; text-align: center;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.2); backdrop-filter: blur(10px);
        }

        .shop-btn { 
            display: inline-block; margin: 5px; padding: 10px; border: 1px solid var(--cyan); 
            border-radius: 12px; font-size: 10px; color: white; background: rgba(0,242,255,0.1);
        }

        .play-btn { 
            background: var(--gold); color: #000; padding: 20px 80px; border-radius: 50px; 
            border: none; font-size: 24px; font-weight: 900; cursor: pointer; margin-top: 30px;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4); transition: 0.3s;
        }
        .play-btn:active { transform: scale(0.9); }

        #stats { 
            position: fixed; top: 20px; right: 20px; color: var(--gold); 
            font-weight: bold; font-size: 18px; z-index: 500; text-shadow: 2px 2px 5px #000;
        }

        canvas { display: block; }
    </style>
</head>
<body>

<div id="stats">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: <span id="dist">0</span> Ù…ØªØ±</div>

<div id="menu">
    <div class="main-card">
        <h1 style="color:var(--gold); margin:0; font-size: 28px;">ROYAL CAT SHOP</h1>
        <p style="color: #ccc; font-size: 14px; margin-bottom: 20px;">Ø§Ù„Ù…Ù‡Ù…Ø©: Ø§Ù„ÙˆØµÙˆÙ„ Ø¨Ø§Ù„Ù‚Ø·Ø© Ù„Ù„Ø£Ù…Ø§Ù† Ù„Ù„Ø²ÙˆØ§Ø¬ Ø¨Ù€ 55 Ø¹Ø§Ù…Ø§Ù‹ ğŸ’</p>
        
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 8px;">
            <div class="shop-btn">ğŸ± Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§</div>
            <div class="shop-btn">ğŸˆ Ø³ÙŠØ§Ù…ÙŠ</div>
            <div class="shop-btn" style="border-color: var(--gold);">ğŸ¦ Ø§Ù„Ù…Ù„ÙƒÙŠ</div>
            <div class="shop-btn">ğŸ‘‘ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ</div>
        </div>

        <div style="margin-top: 20px; padding: 10px; background: rgba(255,0,0,0.1); border-radius: 15px; border: 1px dashed #ff4757;">
            <span style="color:#ff4757; font-size: 12px;">â¤ï¸ Ù…ØªØ¬Ø± Ø§Ù„ØªØ¨Ø±Ø¹ Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ù‚Ø·Ø· ($1)</span>
        </div>
    </div>
    <button class="play-btn" id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ù‡Ù…Ø© ğŸš€</button>
</div>

<canvas id="stage"></canvas>

<script>
const canvas = document.getElementById('stage'), ctx = canvas.getContext('2d');
const menu = document.getElementById('menu'), startBtn = document.getElementById('startBtn');
const distShow = document.getElementById('dist');

let active = false, score = 0, frame = 0, enemies = [];
let cat = { x: 100, y: 0, v: 0, g: 0.45, j: -9, angle: 0, legPh: 0 };

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.onresize = resize; resize();

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
startBtn.onclick = () => {
    menu.style.opacity = '0';
    setTimeout(() => { 
        menu.style.display = 'none';
        active = true;
        cat.y = canvas.height / 2;
        cat.v = 0; score = 0; enemies = []; frame = 0;
        loop();
    }, 500);
};

// Ù‚ÙØ²Ø© Ø§Ù„Ù‚Ø·Ø©
const doJump = () => { if(active) cat.v = cat.j; };
window.addEventListener('mousedown', doJump);
window.addEventListener('touchstart', (e) => { doJump(); e.preventDefault(); }, {passive: false});

function drawCat() {
    cat.legPh += 0.25;
    cat.angle = Math.min(Math.PI/4, Math.max(-Math.PI/4, cat.v * 0.05));
    
    ctx.save();
    ctx.translate(cat.x, cat.y);
    ctx.rotate(cat.angle);

    // Ø§Ù„Ø£Ø±Ø¬Ù„ Ø§Ù„Ø£Ø±Ø¨Ø¹Ø© (Ø­Ø±ÙƒØ© Ø±ÙƒØ¶ Ø­Ù‚ÙŠÙ‚ÙŠØ©)
    ctx.strokeStyle = "#FFD700"; ctx.lineWidth = 4;
    for(let i=0; i<4; i++) {
        let lx = -15 + (i * 10);
        let ly = 12 + Math.sin(cat.legPh + i) * 10;
        ctx.beginPath(); ctx.moveTo(lx, 5); ctx.lineTo(lx, ly); ctx.stroke();
    }

    // Ø¬Ø³Ù… Ø§Ù„Ù‚Ø·Ø© (ØªØµÙ…ÙŠÙ… Ù…Ù„ÙƒÙŠ)
    ctx.fillStyle = "#FFD700";
    ctx.beginPath(); ctx.ellipse(0, 0, 30, 18, 0, 0, 7); ctx.fill();
    // Ø§Ù„Ø±Ø£Ø³
    ctx.beginPath(); ctx.arc(22, -12, 14, 0, 7); ctx.fill();
    // Ø§Ù„Ø£Ø°Ù†ÙŠÙ†
    ctx.beginPath(); ctx.moveTo(15, -22); ctx.lineTo(22, -35); ctx.lineTo(29, -22); ctx.fill();
    // Ø§Ù„Ø°ÙŠÙ„
    ctx.strokeStyle = "#FFD700"; ctx.lineWidth = 6;
    ctx.beginPath(); ctx.moveTo(-25, 0); ctx.quadraticCurveTo(-45, -20, -35, -35); ctx.stroke();
    // Ø§Ù„Ø¹ÙŠÙˆÙ†
    ctx.fillStyle = "#000"; ctx.beginPath(); ctx.arc(28, -14, 3, 0, 7); ctx.fill();
    ctx.restore();
}

function drawGhost(e) {
    ctx.save();
    ctx.translate(e.x, e.y);
    let wave = Math.sin(frame * 0.1) * 10;
    
    // ÙˆØ­Ø´ "Ø´Ø¨Ø­" Ù…Ø±Ø¹Ø¨
    ctx.fillStyle = "rgba(255, 255, 255, 0.2)";
    ctx.beginPath();
    ctx.moveTo(-20, 20); ctx.lineTo(-20, -10);
    ctx.quadraticCurveTo(0, -35, 20, -10); ctx.lineTo(20, 20);
    ctx.lineTo(10, 10 + wave); ctx.lineTo(0, 20); ctx.lineTo(-10, 10 + wave); ctx.close();
    ctx.fill();

    // Ø¹ÙŠÙˆÙ† Ø­Ù…Ø±Ø§Ø¡ Ù…ØªÙˆÙ‡Ø¬Ø©
    ctx.fillStyle = "red";
    ctx.beginPath(); ctx.arc(-7, -8, 4, 0, 7); ctx.arc(7, -8, 4, 0, 7); ctx.fill();
    ctx.restore();
}

function loop() {
    if(!active) return;
    frame++; score++;
    distShow.innerText = Math.floor(score/10);

    // Ø®Ù„ÙÙŠØ© "Ù„ÙŠÙ„Ø© Ø§Ù„Ø³Ø§Ø­Ù„"
    let grd = ctx.createLinearGradient(0, 0, 0, canvas.height);
    grd.addColorStop(0, "#050520"); grd.addColorStop(1, "#1a0a30");
    ctx.fillStyle = grd; ctx.fillRect(0, 0, canvas.width, canvas.height);

    // ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù‚Ø·Ø©
    cat.v += cat.g;
    cat.y += cat.v;
    drawCat();

    // Ø¸Ù‡ÙˆØ± Ø§Ù„ÙˆØ­ÙˆØ´ (Ø§Ù„Ø£Ø´Ø¨Ø§Ø­)
    if(frame % 90 == 0) {
        enemies.push({ x: canvas.width + 50, y: 50 + Math.random()*(canvas.height-100) });
    }

    for(let i=enemies.length-1; i>=0; i--) {
        enemies[i].x -= 7;
        drawGhost(enemies[i]);

        // ØªØµØ§Ø¯Ù… Ø¯Ù‚ÙŠÙ‚
        if(Math.hypot(cat.x - enemies[i].x, cat.y - enemies[i].y) < 45) {
            active = false;
            menu.style.display = 'flex'; menu.style.opacity = '1';
        }
        if(enemies[i].x < -100) enemies.splice(i, 1);
    }

    if(cat.y > canvas.height || cat.y < 0) {
        active = false;
        menu.style.display = 'flex'; menu.style.opacity = '1';
    }

    requestAnimationFrame(loop);
}
</script>
</body>
</html>